# BFF
基于 Gin 的 BFF

## 错误码

### Common错误(如果无法确定就从其中选择)

| 错误码 | HTTP状态码 | 错误信息     | 模块     |
| :----- | :--------- | :----------- | :------- |
| 40002  | 422        | 请求参数错误 | Commonon |
| 40003  | 403        | 访问权限不足 | Common   |
| 40004  | 400        | 非法的参数值 | Common   |
| 50001  | 500        | 系统内部错误 | Common   |
| 50002  | 500        | 类型转换错误 | Common   |

### Authorization模块

| 错误码 | HTTP状态码 | 错误信息             | 模块          |
| :----- | :--------- | :------------------- | :------------ |
| 40001  | 401        | Authorization错误    | authorization |
| 50001  | 500        | 验证系统发生内部错误 | authorization |

### User模块

| 错误码 | HTTP状态码 | 错误信息                  | 模块 |
| :----- | :--------- | :------------------------ | :--- |
| 50004  | 401        | 华中师范大学账号登录失败! | user |
| 50005  | 400        | 账号或者密码错误!         | user |
| 50001  | 401        | 登出失败!                 | user |
| 50001  | 401        | 刷新 Token 失败!          | user |

### Banner模块

| 错误码 | HTTP状态码 | 错误信息          | 模块   |
| :----- | :--------- | :---------------- | :----- |
| 50001  | 500        | 获取用banner失败! | Banner |
| 50001  | 500        | 保存banner失败!   | Banner |
| 50001  | 500        | 删除banner失败!   | Banner |

### Calendar模块

| 错误码 | HTTP状态码 | 错误信息      | 模块     |
| :----- | :--------- | :------------ | :------- |
| 50001  | 500        | 获取日历失败! | Calendar |
| 50001  | 500        | 保存日历失败! | Calendar |
| 50001  | 500        | 删除日历失败! | Calendar |

### InfoSum模块

| 错误码 | HTTP状态码 | 错误信息            | 模块    |
| :----- | :--------- | :------------------ | :------ |
| 50001  | 500        | 获取信息汇总失败!   | InfoSum |
| 50001  | 500        | 保存信息汇总失败!   | InfoSum |
| 50001  | 500        | 删除信息汇总失败!   | InfoSum |
| 50003  | 500        | 保存用户key失败!    | InfoSum |
| 50004  | 500        | 更新用户key失败!    | InfoSum |
| 50005  | 500        | 获取校园卡信息失败! | InfoSum |

### Department模块

| 错误码 | HTTP状态码 | 错误信息          | 模块       |
| :----- | :--------- | :---------------- | :--------- |
| 50001  | 500        | 获取部门信息失败! | Department |
| 50001  | 500        | 保存部门信息失败! | Department |
| 50001  | 500        | 删除部门信息失败! | Department |

### Class模块

| 错误码 | HTTP状态码 | 错误信息                    | 模块  |
| :----- | :--------- | :-------------------------- | :---- |
| 50001  | 500        | 获取课程列表失败!           | Class |
| 50001  | 500        | 添加课程失败!               | Class |
| 50001  | 500        | 删除课程失败!               | class |
| 50001  | 500        | 更新课程失败!               | Class |
| 50001  | 500        | 获取回收站中的课程信息失败! | Class |
| 50001  | 500        | 恢复课程失败!               | Class |
| 50001  | 500        | 搜索课程失败!               | Class |

### Elecprice模块

| 错误码 | HTTP状态码 | 错误信息              | 模块      |
| :----- | :--------- | :-------------------- | :-------- |
| 50001  | 500        | 检查电费失败!         | elecprice |
| 50001  | 500        | 设置电费提醒标准失败! | elecprice |
| 50001  | 500        | 获取电费提醒标准失败! | elecprice |
| 50001  | 500        | 取消电费提醒标准失败! | elecprice |

### Feed模块

| 错误码 | HTTP状态码 | 错误信息                  | 模块 |
| :----- | :--------- | :------------------------ | :--- |
| 50001  | 500        | 获取订阅事件失败!         | feed |
| 50001  | 500        | 清空订阅事件失败!         | feed |
| 50001  | 500        | 修改订阅白名单失败!       | feed |
| 50001  | 500        | 获取订阅白名单失败!       | feed |
| 50001  | 500        | 标记订阅事件为已读失败!   | feed |
| 50001  | 500        | 保存订阅令牌失败!         | feed |
| 50001  | 500        | 删除订阅令牌失败!         | feed |
| 50001  | 500        | 发布木犀官方消息失败!     | feed |
| 50001  | 500        | 停止木犀官方消息失败!     | feed |
| 50001  | 500        | 获取待发布的官方消息失败! | feed |
| 50001  | 500        | 获取失败的消息失败!       | feed |

### Question模块

| 错误码 | HTTP状态码 | 错误信息            | 模块     |
| :----- | :--------- | :------------------ | :------- |
| 50001  | 500        | 获取问题失败!       | question |
| 50001  | 500        | 创建问题失败!       | question |
| 50001  | 500        | 修改问题失败!       | question |
| 50001  | 500        | 删除问题失败!       | question |
| 50001  | 500        | 按名称查找问题失败! | question |
| 50001  | 500        | 标记问题状态失败!   | question |

### Grade模块

| 错误码 | HTTP状态码 | 错误信息            | 模块  |
| :----- | :--------- | :------------------ | :---- |
| 50001  | 500        | 按学期获取成绩失败! | grade |
| 50001  | 500        | 获取成绩分数失败!   | grade |

### Static模块

| 错误码 | HTTP状态码 | 错误信息                  | 模块   |
| :----- | :--------- | :------------------------ | :----- |
| 50001  | 500        | 按标签匹配静态数据失败!   | static |
| 50001  | 500        | 保存静态数据失败!         | static |
| 50001  | 500        | 通过文件保存静态数据失败! | static |

### Website模块

| 错误码 | HTTP状态码 | 错误信息          | 模块        |
| :----- | :--------- | :---------------- | :---------- |
| 50001  | 500        | 获取网站列表失败! | GetWebsites |
| 50001  | 500        | 保存网站信息失败! | SaveWebsite |
| 50001  | 500        | 删除网站失败!     | DelWebsite  |

## 说明

1. 使用长短Token机制，请求头上用 Bearer 表示进行身份验证

## 系统架构

// TODO

